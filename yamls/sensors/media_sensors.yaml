  - platform: tautulli
    host: !secret base_url
    ssl: true
    api_key: !secret tautulli_api
    port: !secret tautulli_port
    path: !secret tautulli_path
    monitored_conditions:
      - stream_count
      - full_title
      - friendly_name
      - user

  - platform: qbittorrent
    url: !secret qbittorrent_ip
    name: "downloading"
    username: !secret qbittorrent_username
    password: !secret http_password

  - platform: sonarr
    api_key: !secret sonarr_api
    host: !secret desktop_ip
    monitored_conditions:
      - diskspace
      - upcoming
    unit: GB
    days: 1
  - platform: radarr
    api_key: !secret radarr_api
    host: !secret desktop_ip
    monitored_conditions:
      - upcoming
      - diskspace
    days: 14
    unit: TB
  - platform: sonarr_upcoming_media
    api_key: !secret sonarr_api
    host: !secret base_url
    port: !secret sonarr_port
    days: 2
    ssl: true
    max: 10
  - platform: radarr_upcoming_media
    api_key: !secret radarr_api
    host: !secret base_url
    port: !secret radarr_port
    days: 30
    theaters: false
    max: 10
    ssl: true
  - platform: plex_recently_added
    token: !secret plex_token
    host: !secret base_url
    port: !secret plex_port
    server_name: !secret plex_server_name
    ssl: false
    download_images: false
    max: 5

  - platform: template
    sensors:
      # sonarr_upcoming_list:
        # friendly_name: Upcoming Episodes
        # icon_template: mdi:television
        # value_template: >
          # {% for attr in states.sensor.sonarr_upcoming.attributes %}
           # {% if not attr=="friendly_name" and not attr=="icon" and not attr=="unit_of_measurement" and not attr=="hidden" and not attr=="custom_ui_state_card" %}
            # {{attr}}: {{states.sensor.sonarr_upcoming.attributes[attr]}} {{" |  "}}
           # {% endif %}
          # {% endfor %}
      # radarr_upcoming_list:
        # friendly_name: Upcoming Movies
        # icon_template: mdi:video
        # value_template: >
          # {% for attr in states.sensor.radarr_upcoming.attributes %}
          # {% if not attr=="friendly_name" and not attr=="icon" and not attr=="unit_of_measurement" and not attr=="hidden" and not attr=="custom_ui_state_card" %}
            # {{attr}} {{" |  "}}
           # {% endif %}
          # {% endfor %}
      desktop_disk_space_c:
        friendly_name: "C: - Main"
        icon_template: mdi:harddisk
        unit_of_measurement: "GiB"
        value_template: >
          {% for attr in states.sensor.sonarr_disk_space.attributes %}
            {% if  "C" in attr  %}
              {%- set c_drive = states.sensor.sonarr_disk_space.attributes[attr] -%}
              {%- set full = c_drive.split('GB')[0] -%}
              {%- set free = full.split('/')[0] | float | round(1) -%}
              {%- set total = full.split('/')[1] | float | round(1) -%}
              {%- set used = total - free | float | round(1) -%}
              {{ used }}
            {% endif %}
          {% endfor %}
      desktop_disk_space_e:
        friendly_name: "E: - TV"
        icon_template: mdi:harddisk
        unit_of_measurement: "TB"
        value_template: >
          {% for attr in states.sensor.radarr_disk_space.attributes %}
            {% if  "E" in attr  %}
              {%- set e_drive = states.sensor.radarr_disk_space.attributes[attr] -%}
              {%- set full = e_drive.split('TB')[0] -%}
              {%- set free = full.split('/')[0] | float | round(2) -%}
              {%- set total = full.split('/')[1] | float | round(2) -%}
              {%- set used = (total - free) | float | round(2) -%}
              {{ used }}
            {% endif %}
          {% endfor %}
      desktop_disk_space_f:
        friendly_name: "F: - Archives"
        icon_template: mdi:harddisk
        unit_of_measurement: "GiB"
        value_template: >
          {% for attr in states.sensor.sonarr_disk_space.attributes %}
            {% if  "F" in attr  %}
              {%- set f_drive = states.sensor.sonarr_disk_space.attributes[attr] -%}
              {%- set full = f_drive.split('GB')[0] -%}
              {%- set free = full.split('/')[0] | float | round(1) -%}
              {%- set total = full.split('/')[1] | float | round(1) -%}
              {%- set used = (total - free) | float | round(1) -%}
              {{ used }}
            {% endif %}
          {% endfor %}
      desktop_disk_space_i:
        friendly_name: "I: - Movies"
        icon_template: mdi:harddisk
        unit_of_measurement: "TB"
        value_template: >
          {% for attr in states.sensor.radarr_disk_space.attributes %}
            {% if  "I" in attr  %}
              {%- set i_drive = states.sensor.radarr_disk_space.attributes[attr] -%}
              {%- set full = i_drive.split('TB')[0] -%}
              {%- set free = full.split('/')[0] | float | round(2) -%}
              {%- set total = full.split('/')[1] | float | round(2) -%}
              {%- set used = (total - free) | float | round(2) -%}
              {{ used }}
            {% endif %}
          {% endfor %}
      desktop_disk_space_j:
        friendly_name: "J: - ETC"
        icon_template: mdi:harddisk
        unit_of_measurement: "TB"
        value_template: >
          {% for attr in states.sensor.radarr_disk_space.attributes %}
            {% if  "J" in attr  %}
              {%- set j_drive = states.sensor.radarr_disk_space.attributes[attr] -%}
              {%- set full = j_drive.split('TB')[0] -%}
              {%- set free = full.split('/')[0] | float | round(2) -%}
              {%- set total = full.split('/')[1] | float | round(2) -%}
              {%- set used = (total - free) | float | round(2) -%}
              {{ used }}
            {% endif %}
          {% endfor %}
      upcoming_downloads:
        friendly_name: Upcoming Downloads
        icon_template: mdi:video
        value_template: >- 
          {{ (states('sensor.radarr_upcoming') | float | int) + (states('sensor.sonarr_upcoming') | float | int) }}
### Sample for my Tautulli Sensors by Username
  # tautulli_watching_me:
    # icon_template: mdi:plex
    # friendly_name: "I am Watching"
    # value_template: >
      # {% if state_attr('sensor.tautulli', 'USERNAME') ['full_title'] | string == "" %}
        # Nothing
      # {% else %}
        # {{ state_attr('sensor.tautulli', 'USERNAME') ['full_title'] }}
      # {% endif %}